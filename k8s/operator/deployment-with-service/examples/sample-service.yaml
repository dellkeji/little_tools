apiVersion: apps.example.com/v1
kind: Service
metadata:
  name: sample-web-service
  namespace: default
spec:
  image: nginx:1.21
  replicas: 3
  port: 80
  serviceType: ClusterIP
  configData:
    nginx.conf: |
      server {
          listen 80;
          location / {
              return 200 'Hello from Service Operator!';
              add_header Content-Type text/plain;
          }
      }
  env:
    - name: ENV
      value: "production"
    - name: LOG_LEVEL
      value: "info"
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"
  ingress:
    enabled: true
    host: sample-web.example.com
    path: /
    annotations:
      kubernetes.io/ingress.class: nginx
      nginx.ingress.kubernetes.io/rewrite-target: /
    tls:
      enabled: true
      secretName: sample-web-tls